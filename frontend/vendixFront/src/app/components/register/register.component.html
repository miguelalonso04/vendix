<div class="register-page">
  <div class="brand-header">
    <div class="logo">VENDIX</div>
    <div class="tagline">Ãšnete a nuestra comunidad</div>
  </div>

  <div class="register-card">
    <h2>Crear Cuenta</h2>
    
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-grid">

        <div class="input-field">
          <input id="firstName" type="text" formControlName="firstName" required class="form-input">
          <label for="firstName">Nombre</label>
          <span class="input-icon">ğŸ‘¤</span>
          <div *ngIf="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched" class="error-message">
            <span class="error-icon">!</span> Nombre requerido
          </div>
        </div>

        <div class="input-field">
          <input id="lastName" type="text" formControlName="lastName" required class="form-input">
          <label for="lastName">Apellido</label>
          <span class="input-icon">ğŸ‘¥</span>
          <div *ngIf="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched" class="error-message">
            <span class="error-icon">!</span> Apellido requerido
          </div>
        </div>

        <div class="input-field">
          <input id="telefono" type="text" formControlName="telefono" required class="form-input">
          <label for="telefono">TelÃ©fono</label>
          <span class="input-icon">ğŸ“±</span>
          <div *ngIf="userForm.get('telefono')?.errors?.['required'] && userForm.get('telefono')?.touched" class="error-message">
            <span class="error-icon">!</span> TelÃ©fono requerido
          </div>
          <div *ngIf="userForm.get('telefono')?.errors?.['pattern'] && userForm.get('telefono')?.touched" class="error-message">
            <span class="error-icon">!</span> 8 dÃ­gitos requeridos
          </div>
        </div>

        <div class="input-field">
          <input id="email" type="email" formControlName="email" required class="form-input">
          <label for="email">Correo ElectrÃ³nico</label>
          <span class="input-icon">âœ‰ï¸</span>
          <div *ngIf="userForm.get('email')?.errors?.['required'] && userForm.get('email')?.touched" class="error-message">
            <span class="error-icon">!</span> Email requerido
          </div>
          <div *ngIf="userForm.get('email')?.errors?.['email'] && userForm.get('email')?.touched" class="error-message">
            <span class="error-icon">!</span> Formato invÃ¡lido
          </div>
        </div>

        <div class="input-field">
          <input id="username" type="text" formControlName="username" required class="form-input">
          <label for="username">Usuario</label>
          <span class="input-icon">ğŸ‘¨â€ğŸ’»</span>
          <div *ngIf="userForm.get('username')?.errors?.['required'] && userForm.get('username')?.touched" class="error-message">
            <span class="error-icon">!</span> Usuario requerido
          </div>
          <div *ngIf="userForm.get('username')?.errors?.['minlength'] && userForm.get('username')?.touched" class="error-message">
            <span class="error-icon">!</span> MÃ­nimo 5 caracteres
          </div>
        </div>
      </div>

      <div class="password-section">
        <div class="password-row">
          <div class="input-field password-field">
            <div class="password-input-container">
              <input 
                id="password" 
                [type]="showPassword ? 'text' : 'password'" 
                formControlName="password" 
                required
                class="form-input"
                (input)="checkPasswordStrength()"
              >
              <label for="password">ContraseÃ±a</label>
              <span class="input-icon">ğŸ”’</span>
              <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
                <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>
            
            <div class="password-strength" *ngIf="userForm.get('password')?.value">
              <div class="strength-meter">
                <div class="strength-bar" [ngClass]="passwordStrengthClass"></div>
              </div>
              <div class="strength-info">
                <span class="strength-label">Seguridad: {{passwordStrengthText}}</span>
              </div>
            </div>
            
            <div *ngIf="userForm.get('password')?.errors?.['required'] && userForm.get('password')?.touched" class="error-message">
              <span class="error-icon">!</span> ContraseÃ±a requerida
            </div>
            <div *ngIf="userForm.get('password')?.errors?.['minlength'] && userForm.get('password')?.touched" class="error-message">
              <span class="error-icon">!</span> MÃ­nimo 8 caracteres
            </div>
          </div>

          <div class="input-field confirm-password-field">
            <div class="password-input-container">
              <input 
                id="confirmPassword" 
                [type]="showConfirmPassword ? 'text' : 'password'" 
                formControlName="confirmPassword" 
                required
                class="form-input"
              >
              <label for="confirmPassword">Confirmar ContraseÃ±a</label>
              <span class="input-icon">ğŸ”’</span>
              <button type="button" class="toggle-password" (click)="toggleConfirmPasswordVisibility()">
                <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </button>
            </div>
            <div *ngIf="userForm.get('confirmPassword')?.errors?.['required'] && userForm.get('confirmPassword')?.touched" class="error-message">
              <span class="error-icon">!</span> Confirma tu contraseÃ±a
            </div>
            <div *ngIf="userForm.hasError('mismatch') && userForm.get('confirmPassword')?.touched" class="error-message">
              <span class="error-icon">!</span> Las contraseÃ±as no coinciden
            </div>
          </div>
        </div>

        <div class="password-requirements" *ngIf="userForm.get('password')?.value">
          <p>La contraseÃ±a debe contener:</p>
          <ul>
            <li [class.requirement-met]="hasMinLength">âœ“ Al menos 8 caracteres</li>
            <li [class.requirement-met]="hasUpperCase">âœ“ Una letra mayÃºscula</li>
            <li [class.requirement-met]="hasLowerCase">âœ“ Una letra minÃºscula</li>
            <li [class.requirement-met]="hasNumber">âœ“ Un nÃºmero</li>
            <li [class.requirement-met]="hasSpecialChar">âœ“ Un carÃ¡cter especial</li>
          </ul>
        </div>
      </div>

      <button type="submit" class="submit-btn" [disabled]="userForm.invalid">
        Registrarse <span class="arrow">â†’</span>
      </button>

      <div *ngIf="errorMessage" class="server-error">
        <span class="error-icon">âš </span> {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message">
        <span class="success-icon">âœ”</span> {{ successMessage }}
      </div>
      <div class="login-prompt">
        Â¿Ya tienes cuenta? <a href="/login" class="login-link">Iniciar SesiÃ³n</a>
      </div>
    </form>
  </div>
</div>